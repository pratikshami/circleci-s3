
  
machine:
  services:
    - docker

dependencies:
  override:
    - docker info
    - docker build -t pratiksha12/circlecijob1:$CIRCLE_SHA1 .

test:
  override:
    - docker run -d -p 3010:3010 pratiksha12/circlecijob1:$CIRCLE_SHA1; sleep 10
    

deployment:
  staging:
    branch: master
    codedeploy:
      circleci-s3:
        application_root: /
        region: us-east-1
        revision_location:
          revision_type: S3
          s3_location:
            bucket: alm-nodejs
            key_pattern: circleci-s3-{BRANCH}-{SHORT_COMMIT}
